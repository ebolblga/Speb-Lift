import{D as m,S as h,_ as A,u as M}from"./BinWqm3C.js";import U from"./3ha6AU9E.js";import{e as y,o as g,c as v,a as d,t as w,b as _,u as b,g as D,k as $,p as j,w as E,F as L,l as V}from"./4wj8nHx_.js";const F={class:"w-full rounded-md bg-background2 flex flex-row items-center justify-evenly"},I={class:"w-[80px]"},O={class:"flex flex-row w-[200px]"},N=y({__name:"ListElement",props:{record:{}},emits:["update:record","delete:record"],setup(x,{emit:t}){const r=x,l=t,s=e=>{e&&l("update:record",{...r.record,direction:e})},i=e=>{e&&l("update:record",{...r.record,station:e})},u=()=>{l("delete:record",r.record)};return(e,a)=>{const n=A,f=U;return g(),v("div",F,[d("p",I,w(e.record.seconds)+" sec",1),d("div",O,[_(n,{id:"direction_"+e.record.id,"enum-values":b(m),"model-value":e.record.direction,"onUpdate:modelValue":s},null,8,["id","enum-values","model-value"]),_(n,{id:"station_"+e.record.id,"enum-values":b(h),"model-value":e.record.station,"onUpdate:modelValue":i},null,8,["id","enum-values","model-value"])]),d("p",null,w(e.record.date),1),d("button",{onClick:u,class:"flex items-center justify-center bg-red rounded-lg w-[24px] h-[24px] hover:bg-background2 hover:border-red hover:border-2"},[_(f,{name:"iconoir:cancel",size:"24"})])])}}}),z=Symbol.for("nuxt:client-only"),R=y({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(x,{slots:t,attrs:r}){const l=D(!1);return $(()=>{l.value=!0}),j(z,!0),s=>{var a;if(l.value)return(a=t.default)==null?void 0:a.call(t);const i=t.fallback||t.placeholder;if(i)return i();const u=s.fallback||s.placeholder||"",e=s.fallbackTag||s.placeholderTag||"span";return v(e,r,u)}}}),q={class:"flex justify-center flex-col"},G={class:"max-h-[80vh] w-[85vw] max-w-[900px] min-w-[370px] overflow-auto p-3 bg-background2 rounded-md mx-auto"},H={class:"mx-auto"},Q=y({__name:"stats",setup(x){const t=M("my-records",[]),r=D(""),l=async()=>{if(!t.value.length)try{const e=await fetch("/default-data.json");if(!e.ok)throw new Error(`Failed to load default data: ${e.statusText}`);const a=await e.json();t.value=a}catch(e){console.error("Error loading default data:",e)}};$(async()=>{await l(),r.value=u()});function s(e){const a=t.value.findIndex(n=>n.id===e.id);a!==-1&&(t.value[a]=e),r.value=u()}function i(e){const a=t.value.findIndex(n=>n.id===e.id);a!==-1&&t.value.splice(a,1),r.value=u()}function u(){let e="";const a=t.value.reduce((o,c)=>o+c.seconds,0);e+=`Average: ${Math.round(a/t.value.length)} sec
`;const n=t.value.filter(o=>o.direction===m.up&&o.station===h.bottom),f=n.reduce((o,c)=>o+c.seconds,0)/n.length;e+=`Average ↑ through 28: ${Math.round(f)} sec
`;const p=t.value.filter(o=>o.direction===m.up&&o.station===h.top),T=p.reduce((o,c)=>o+c.seconds,0)/p.length;e+=`Average ↑ through 32: ${Math.round(T)} sec
`;const k=t.value.filter(o=>o.direction===m.down&&o.station===h.bottom),B=k.reduce((o,c)=>o+c.seconds,0)/k.length;e+=`Average ↓ through 28: ${Math.round(B)} sec
`;const S=t.value.filter(o=>o.direction===m.down&&o.station===h.top),C=S.reduce((o,c)=>o+c.seconds,0)/S.length;return e+=`Average ↓ through 32: ${Math.round(C)} sec
`,e}return(e,a)=>{const n=N,f=R;return g(),v("div",q,[d("div",G,[_(f,{"fallback-tag":"span",fallback:"Loading stats..."},{default:E(()=>[d("ul",null,[(g(!0),v(L,null,V(b(t),p=>(g(),v("li",{key:p.id},[_(n,{record:p,"onUpdate:record":s,"onDelete:record":i},null,8,["record"])]))),128))])]),_:1})]),d("div",H,[d("pre",null,w(b(r)),1)])])}}});export{Q as default};
